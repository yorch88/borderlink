ğŸš€ 4ï¸âƒ£ Flujo correcto para probar onboarding

    `Este es el orden exacto:

    ğŸ¥‡ Paso 1 â€“ Registrar usuario

    Endpoint:

    POST /v1/onboarding/register


    Ejemplo body:

    {
    "email": "admin@test.com",
    "password": "test#12345678",
    "giro": "psychology",
    "org_name": "Consultorio MentalIA",
    "modules": ["MetalIA MS"],
    "captcha_token": "dev"
    }


    Debe devolver:

    {
    "client_code": "48213",
    "db_name": "8213_X9ZT",
    "status": "pending",
    "approval_token": "eyJhbGciOi..."
    }


    Si no devuelve approval_token â†’ revisa que estÃ©s en development.

    ğŸ¥ˆ Paso 2 â€“ Aprobar usuario

    Copias el approval_token.

    Ejecutas:

    POST /v1/onboarding/approve

    {
    "token": "eyJhbGciOi..."
    }


    Debe devolver:

    {
    "status": "active",
    "tenant_db": "8213_X9ZT"
    }


    AquÃ­ es cuando se crea la base tenant.

    Puedes verificar dentro del contenedor Mongo:

    docker exec -it tailhawk_mongo mongosh


    Y luego:

    show dbs


    Debe aparecer:

    borderlink_global
    8213_X9ZT

    ğŸ¥‰ Paso 3 â€“ Login
    POST /v1/auth/login

    {
    "email": "admin@test.com",
    "password": "12345678"
    }


    Debe devolver:

    {
    "access_token": "eyJhbGciOi...",
    "token_type": "bearer"
    }

    ğŸ… Paso 4 â€“ Probar endpoint protegido

    Click en Authorize en Swagger

    Pega el access_token

    Ejecuta:

    GET /v1/app/me


    Debe devolver el usuario del tenant.

    ğŸ§  Orden mental correcto

    Siempre:

    register
    â†’ approve
    â†’ login
    â†’ endpoint protegido
`
